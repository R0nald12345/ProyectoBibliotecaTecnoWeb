import{d as l,i as M,c as P,o as R,w as B,a as s,v as w,A as _,t as c,B as E}from"./app-CspU-I19.js";import{_ as D}from"./AppLayout-G4h-djql.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as r,r as G}from"./chart-DUfl3Dpl.js";const V={class:"py-6"},$={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},I={class:"mb-6 bg-white shadow-lg rounded-lg p-6 flex flex-col sm:flex-row sm:items-end gap-4"},U={class:"flex-1"},Z={class:"flex-1"},T={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},W={class:"bg-white overflow-hidden shadow-lg rounded-lg"},z={class:"p-6"},N={class:"flex items-center"},q={class:"ml-4"},J={class:"text-3xl font-bold text-gray-900"},K={class:"bg-white overflow-hidden shadow-lg rounded-lg"},L={class:"p-6"},Q={class:"flex items-center"},X={class:"ml-4"},Y={class:"text-3xl font-bold text-gray-900"},ss={class:"bg-white overflow-hidden shadow-lg rounded-lg"},ts={class:"p-6"},es={class:"flex items-center"},as={class:"ml-4"},os={class:"text-3xl font-bold text-gray-900"},ls={class:"bg-white overflow-hidden shadow-lg rounded-lg"},is={class:"p-6"},rs={class:"flex items-center"},ds={class:"ml-4"},ns={class:"text-3xl font-bold text-gray-900"},cs={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},us={class:"bg-white shadow-lg rounded-lg p-6"},ps={class:"bg-white shadow-lg rounded-lg p-6"},gs={class:"bg-white shadow-lg rounded-lg p-6"},hs={class:"bg-white shadow-lg rounded-lg p-6"},vs={class:"bg-white shadow-lg rounded-lg p-6"},fs={class:"bg-white shadow-lg rounded-lg p-6"},bs={__name:"Dashboard",props:{estadisticas:Object,filtros:Object},setup(y){var m,x;r.register(...G);const u=y,p=l(null),g=l(null),h=l(null),v=l(null),f=l(null),b=l(null),e=l(u.estadisticas),d=l(((m=u.filtros)==null?void 0:m.fecha_inicio)||null),n=l(((x=u.filtros)==null?void 0:x.fecha_fin)||null),k=()=>{if(!d.value||!n.value){alert("Debes seleccionar ambas fechas.");return}E.get(route("dashboard"),{fecha_inicio:d.value,fecha_fin:n.value},{preserveScroll:!0,preserveState:!1})},C=()=>{const o=p.value.getContext("2d"),t=Object.keys(e.value.entradasPorHora).map(i=>`${i.padStart(2,"0")}:00`),a=Object.values(e.value.entradasPorHora);new r(o,{type:"line",data:{labels:t,datasets:[{label:"Entradas",data:a,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Entradas"}},scales:{y:{beginAtZero:!0}}}})},j=()=>{const o=g.value.getContext("2d"),t=Object.keys(e.value.salidasPorHora).map(i=>`${i.padStart(2,"0")}:00`),a=Object.values(e.value.salidasPorHora);new r(o,{type:"line",data:{labels:t,datasets:[{label:"Salidas",data:a,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Salidas"}},scales:{y:{beginAtZero:!0}}}})},H=()=>{const o=h.value.getContext("2d"),t=Object.keys(e.value.salidasPorHora).map(i=>`${i.padStart(2,"0")}:00`),a=Object.values(e.value.salidasPorHora);new r(o,{type:"bar",data:{labels:t,datasets:[{label:"Salidas",data:a,backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"rgb(239, 68, 68)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Salidas"}},scales:{y:{beginAtZero:!0}}}})},A=()=>{const o=v.value.getContext("2d"),t=Object.keys(e.value.entradasPorHora).map(i=>`${i.padStart(2,"0")}:00`),a=Object.values(e.value.entradasPorHora);new r(o,{type:"bar",data:{labels:t,datasets:[{label:"Entradas",data:a,backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"rgb(239, 68, 68)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Entradas"}},scales:{y:{beginAtZero:!0}}}})},S=()=>{const o=f.value.getContext("2d"),t=e.value.estudiantesActuales,a=e.value.capacidadMaxima-t;new r(o,{type:"doughnut",data:{labels:["Ocupado","Disponible"],datasets:[{data:[t,a],backgroundColor:[t>.8*e.value.capacidadMaxima?"rgb(239, 68, 68)":t>.5*e.value.capacidadMaxima?"rgb(245, 158, 11)":"rgb(34, 197, 94)","rgb(229, 231, 235)"],borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:`Asistencia Hoy (${t} Estudiantes)`},legend:{position:"bottom"}}}})},O=()=>{const o=b.value.getContext("2d");new r(o,{type:"pie",data:{labels:Object.keys(e.value.usuariosPorRol),datasets:[{data:Object.values(e.value.usuariosPorRol),backgroundColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)","rgb(147, 51, 234)","rgb(234, 179, 8)"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Usuarios por Rol"},legend:{position:"bottom"}}}})};return M(()=>{setTimeout(()=>{C(),j(),H(),A(),S(),O()},100)}),(o,t)=>(R(),P(D,{title:"Dashboard"},{default:B(()=>[s("div",V,[s("div",$,[t[12]||(t[12]=s("div",{class:"mb-8"},[s("h1",{class:"text-3xl font-bold text-gray-900"}," Sistema de Control de Acceso - Biblioteca FICCT "),s("p",{class:"mt-2 text-gray-600"}," Universidad Autónoma Gabriel René Moreno ")],-1)),s("div",I,[s("div",U,[t[2]||(t[2]=s("label",{for:"fechaInicio",class:"block text-sm font-medium text-gray-700"},"Fecha inicio",-1)),w(s("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>d.value=a),type:"date",id:"fechaInicio",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[_,d.value]])]),s("div",Z,[t[3]||(t[3]=s("label",{for:"fechaFin",class:"block text-sm font-medium text-gray-700"},"Fecha fin",-1)),w(s("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>n.value=a),type:"date",id:"fechaFin",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[_,n.value]])]),s("div",null,[s("button",{onClick:k,class:"mt-1 px-4 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700"}," Filtrar ")])]),s("div",T,[s("div",W,[s("div",z,[s("div",N,[t[5]||(t[5]=s("div",{class:"flex-shrink-0"},[s("div",{class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},[s("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])])],-1)),s("div",q,[t[4]||(t[4]=s("p",{class:"text-sm font-medium text-gray-500"},"Estudiantes Actuales",-1)),s("p",J,c(e.value.estudiantesActuales),1)])])])]),s("div",K,[s("div",L,[s("div",Q,[t[7]||(t[7]=s("div",{class:"flex-shrink-0"},[s("div",{class:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center"},[s("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})])])],-1)),s("div",X,[t[6]||(t[6]=s("p",{class:"text-sm font-medium text-gray-500"},"Entradas Hoy",-1)),s("p",Y,c(e.value.entradasHoy),1)])])])]),s("div",ss,[s("div",ts,[s("div",es,[t[9]||(t[9]=s("div",{class:"flex-shrink-0"},[s("div",{class:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center"},[s("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})])])],-1)),s("div",as,[t[8]||(t[8]=s("p",{class:"text-sm font-medium text-gray-500"},"Salidas Hoy",-1)),s("p",os,c(e.value.salidasHoy),1)])])])]),s("div",ls,[s("div",is,[s("div",rs,[t[11]||(t[11]=s("div",{class:"flex-shrink-0"},[s("div",{class:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center"},[s("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])])],-1)),s("div",ds,[t[10]||(t[10]=s("p",{class:"text-sm font-medium text-gray-500"},"Capacidad",-1)),s("p",ns,c(e.value.capacidadMaxima),1)])])])])]),s("div",cs,[s("div",us,[s("canvas",{ref_key:"entradasChart",ref:p,class:"w-full h-64"},null,512)]),s("div",ps,[s("canvas",{ref_key:"entradasChart2",ref:g,class:"w-full h-64"},null,512)]),s("div",gs,[s("canvas",{ref_key:"salidasChart2",ref:v,class:"w-full h-64"},null,512)]),s("div",hs,[s("canvas",{ref_key:"salidasChart",ref:h,class:"w-full h-64"},null,512)]),s("div",vs,[s("canvas",{ref_key:"ocupacionChart",ref:f,class:"w-full h-64"},null,512)]),s("div",fs,[s("canvas",{ref_key:"estudiantesChart",ref:b,class:"w-full h-64"},null,512)])])])])]),_:1}))}},ys=F(bs,[["__scopeId","data-v-0ef4c6c4"]]);export{ys as default};
