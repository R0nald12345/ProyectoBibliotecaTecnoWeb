import{B as j,q as f,d as L,e as a,o,a as e,f as d,b as g,w as h,g as b,u,S as c,t as l,s as S,z as N,F as v,h as w,p as B,c as E,n as k,D,E as V}from"./app-CxS7mVwd.js";import{_ as M}from"./AppLayout-BWUXbOF7.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"flex items-center justify-between mb-6"},U={key:0,class:"mb-4 p-4 rounded bg-green-100 text-green-800 border border-green-300 shadow"},O={class:"overflow-x-auto bg-white shadow rounded-lg"},$={class:"mb-4"},z={class:"min-w-full divide-y divide-gray-200"},F={class:"divide-y divide-gray-200"},H={class:"px-6 py-4 text-gray-800"},I={class:"px-6 py-4 text-gray-800"},q={class:"px-6 py-4 text-gray-800"},A={class:"px-6 py-4 text-gray-800"},R={class:"px-6 py-4 text-gray-800"},G={key:0},J={key:1,class:"text-gray-500"},K={class:"px-6 py-4 text-right space-x-2"},P=["onSubmit"],Q={key:0,class:"text-center text-gray-500 py-4"},W={key:1,class:"mt-4 flex justify-center space-x-2"},ee=Object.assign({layout:M},{__name:"Index",props:{usuarios:Object,filters:Object},setup(p){const _=p,x=j().props.flash,m=f(()=>x.success||x.message),i=L(""),y=f(()=>{const r=i.value.toLowerCase();return _.usuarios.data.filter(s=>{const t=s.roles.map(n=>n.name).join(" ").toLowerCase();return s.name.toLowerCase().includes(r)||s.email.toLowerCase().includes(r)||s.celular&&s.celular.toLowerCase().includes(r)||t.includes(r)})});function C(r){confirm("¿Estás seguro de eliminar este usuario?")&&V.delete(`/usuarios/${r}`,{preserveScroll:!0,preserveState:!1})}return(r,s)=>(o(),a("div",null,[e("div",T,[s[2]||(s[2]=e("h1",{class:"text-3xl font-bold text-gray-800"},"Usuarios",-1)),g(u(c),{href:r.route("usuarios.create"),class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded shadow"},{default:h(()=>s[1]||(s[1]=[b(" + Nuevo usuario ")])),_:1},8,["href"])]),m.value?(o(),a("div",U,l(m.value),1)):d("",!0),e("div",O,[e("div",$,[S(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>i.value=t),type:"text",placeholder:"Buscar usuario...",class:"w-full sm:w-1/3 px-4 py-2 border border-gray-300 rounded shadow-sm focus:outline-none focus:ring focus:ring-blue-200"},null,512),[[N,i.value]])]),e("table",z,[s[5]||(s[5]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-700"},"ID"),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-700"},"Nombre"),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-700"},"Email"),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-700"},"Celular"),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-700"},"Rol(es)"),e("th",{class:"px-6 py-3 text-right text-sm font-semibold text-gray-700"},"Acciones")])],-1)),e("tbody",F,[(o(!0),a(v,null,w(y.value,t=>(o(),a("tr",{key:t.id},[e("td",H,l(t.id),1),e("td",I,l(t.name),1),e("td",q,l(t.email),1),e("td",A,l(t.celular??"—"),1),e("td",R,[t.roles.length>0?(o(),a("span",G,l(t.roles.map(n=>n.name).join(", ")),1)):(o(),a("span",J,"Sin rol"))]),e("td",K,[g(u(c),{href:r.route("usuarios.edit",t.id),class:"bg-yellow-400 hover:bg-yellow-500 text-white px-3 py-1 rounded shadow"},{default:h(()=>s[3]||(s[3]=[b(" Editar ")])),_:2},1032,["href"]),e("form",{onSubmit:B(n=>C(t.id),["prevent"]),class:"inline"},s[4]||(s[4]=[e("button",{type:"submit",class:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded shadow"}," Eliminar ",-1)]),40,P)])]))),128))])]),y.value.length===0?(o(),a("div",Q," No se encontraron usuarios. ")):d("",!0),i.value?d("",!0):(o(),a("div",W,[(o(!0),a(v,null,w(p.usuarios.links,t=>(o(),E(D(t.url?u(c):"span"),{key:t.label,href:t.url,class:k(["px-3 py-1 rounded border text-sm",{"bg-blue-600 text-white font-semibold":t.active,"bg-white text-gray-700 hover:bg-gray-100":!t.active,"cursor-not-allowed opacity-50":!t.url}]),innerHTML:t.label},null,8,["href","class","innerHTML"]))),128))]))])]))}});export{ee as default};
