import{B as L,q as f,d as S,e as a,o,a as e,f as d,b as h,w as g,g as b,u,S as c,t as l,s as j,z as E,F as v,h as _,p as N,c as B,n as T,L as k,A as V}from"./app-BSTli936.js";import{_ as $}from"./AppLayout-DXNOe8RU.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"flex items-center justify-between mb-6"},M={key:0,class:"mb-4 p-4 rounded bg-green-100 text-green-800 border border-green-300 shadow"},O={class:"overflow-x-auto bg-white shadow rounded-lg"},U={class:"mb-4"},z={class:"min-w-full divide-y divide-gray-200"},A={class:"divide-y divide-gray-200"},F={class:"px-6 py-4 text-gray-800"},H={class:"px-6 py-4 text-gray-800"},q={class:"px-6 py-4 text-gray-800"},I={class:"px-6 py-4 text-gray-800"},P={key:0},R={key:1,class:"text-gray-500"},G={class:"px-6 py-4 text-right space-x-2"},J=["action","onSubmit"],K={key:0,class:"text-center text-gray-500 py-4"},Q={key:1,class:"mt-4 flex justify-center space-x-2"},Z=Object.assign({layout:$},{__name:"Index",props:{usuarios:Object,filters:Object},setup(p){const w=p,m=L().props.flash,x=f(()=>m.success||m.message),i=S(""),y=f(()=>{const r=i.value.toLowerCase();return w.usuarios.data.filter(s=>{const t=s.roles.map(n=>n.name).join(" ").toLowerCase();return s.name.toLowerCase().includes(r)||s.email.toLowerCase().includes(r)||s.celular&&s.celular.toLowerCase().includes(r)||t.includes(r)})});function C(r){confirm("¿Estás seguro de eliminar este usuario?")&&V.delete(`/usuarios/${r}`,{preserveScroll:!0,preserveState:!1})}return(r,s)=>(o(),a("div",null,[e("div",D,[s[2]||(s[2]=e("h1",{class:"text-3xl font-bold text-gray-800"},"Usuarios",-1)),h(u(c),{href:"/usuarios/create",class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded shadow"},{default:g(()=>s[1]||(s[1]=[b(" + Nuevo usuario ")])),_:1})]),x.value?(o(),a("div",M,l(x.value),1)):d("",!0),e("div",O,[e("div",U,[j(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>i.value=t),type:"text",placeholder:"Buscar usuario...",class:"w-full sm:w-1/3 px-4 py-2 border border-gray-300 rounded shadow-sm focus:outline-none focus:ring focus:ring-blue-200"},null,512),[[E,i.value]])]),e("table",z,[s[5]||(s[5]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-700"},"Nombre"),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-700"},"Email"),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-700"},"Celular"),e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-700"},"Rol(es)"),e("th",{class:"px-6 py-3 text-right text-sm font-semibold text-gray-700"},"Acciones")])],-1)),e("tbody",A,[(o(!0),a(v,null,_(y.value,t=>(o(),a("tr",{key:t.id},[e("td",F,l(t.name),1),e("td",H,l(t.email),1),e("td",q,l(t.celular??"—"),1),e("td",I,[t.roles.length>0?(o(),a("span",P,l(t.roles.map(n=>n.name).join(", ")),1)):(o(),a("span",R,"Sin rol"))]),e("td",G,[h(u(c),{href:`/usuarios/${t.id}/edit`,class:"bg-yellow-400 hover:bg-yellow-500 text-white px-3 py-1 rounded shadow"},{default:g(()=>s[3]||(s[3]=[b(" Editar ")])),_:2},1032,["href"]),e("form",{action:`/usuarios/${t.id}`,method:"POST",onSubmit:N(n=>C(t.id),["prevent"]),class:"inline"},s[4]||(s[4]=[e("input",{type:"hidden",name:"_method",value:"DELETE"},null,-1),e("button",{type:"submit",class:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded shadow"}," Eliminar ",-1)]),40,J)])]))),128))])]),y.value.length===0?(o(),a("div",K," No se encontraron usuarios. ")):d("",!0),i.value?d("",!0):(o(),a("div",Q,[(o(!0),a(v,null,_(p.usuarios.links,t=>(o(),B(k(t.url?u(c):"span"),{key:t.label,href:t.url,class:T(["px-3 py-1 rounded border text-sm",{"bg-blue-600 text-white font-semibold":t.active,"bg-white text-gray-700 hover:bg-gray-100":!t.active,"cursor-not-allowed opacity-50":!t.url}]),innerHTML:t.label},null,8,["href","class","innerHTML"]))),128))]))])]))}});export{Z as default};
